<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch API</title>
    <style>
        button{
            width: 150px;
            height: 70px;
        }
    </style>
</head>
<body>
    <ul id="myul"></ul>
    <button id="btn0" onclick="GetData()">แสดงข้อมูล</button>
    <button id="btn1" onclick="PostData()">เพิ่มข้อมูล</button>
    <button id="btn2" onclick="UpdateData()">อัพเดทข้อมูล</button>
    <button id="btn3" onclick="DeleteData()">ลบข้อมูล</button>
    
    <!-- <script>
       // GET
        function GetData(){
            fetch("https://jsonplaceholder.typicode.com/posts",{
                method:'get'
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error =>console.log(error))
        }
        
        // POST
        function PostData(){
            fetch("https://jsonplaceholder.typicode.com/posts",{
                method: "post",
                headers: {
                    "Content-Type": "application/json" 
                },
                body: JSON.stringify({
                    "title": "hello fetch",
                    "body": "fetch is the best"
                })
            }).then(response => response.json())
            .then(data => console.log(data))    
            .catch(error =>console.log(error))
        }
        
        // PUT
        function UpdateData(){
            fetch("https://jsonplaceholder.typicode.com/posts/1",{
                method: "put",
                headers: {
                    "Content-Type": "application/json" 
                },
                body: JSON.stringify({
                    "title": "hello fetch new",
                    "body": "fetch is very the best"
                })
            }).then(response => response.json())
            .then(data => console.log(data))    
            .catch(error =>console.log(error))
        }
        
        // DELETE
        function DeleteData(){
            fetch("https://jsonplaceholder.typicode.com/posts/1",{
                method: "delete"
            })
            .then(response => response.json())
            .then(data => console.log(data))    
            .catch(error =>console.log(error))
        }
   // json-server user.json ใช้เรียก server json
   </script> -->

   <script>
        // GET
        async function GetData(){
            try{
                const response = await fetch("https://jsonplaceholder.typicode.com/posts",{
                    method:'get'
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }
        
        // POST
        async function PostData(){
            try{
                const response = await fetch("https://jsonplaceholder.typicode.com/posts",{
                    method: "post",
                    headers: {
                        "Content-Type": "application/json" 
                    },
                    body: JSON.stringify({
                        "title": "hello fetch",
                        "body": "fetch is the best"
                    })
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }
        
        // PUT
        async function UpdateData(){
            try{
                const response = await fetch("https://jsonplaceholder.typicode.com/posts/1",{
                    method: "put",
                    headers: {
                        "Content-Type": "application/json" 
                    },
                    body: JSON.stringify({
                        "title": "hello fetch new await",
                        "body": "fetch is very the best await"
                    })
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }

        // DELETE
        async function DeleteData(){
            try{
                const response = await fetch("https://jsonplaceholder.typicode.com/posts/1",{
                    method: "delete"
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }
   </script>
</body>
</html>