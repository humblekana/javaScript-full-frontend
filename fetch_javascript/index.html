<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch API</title>
    <style>
        button{
            width: 150px;
            height: 70px;
        }
    </style>
</head>
<body>
    <ul id="myul"></ul>
    <button id="btn0" onclick="GetData()">แสดงข้อมูล</button>
    <button id="btn1" onclick="PostData()">เพิ่มข้อมูล</button>
    <button id="btn2" onclick="UpdateData()">อัพเดทข้อมูล</button>
    <button id="btn3" onclick="DeleteData()">ลบข้อมูล</button>
    
    <!-- <script>
       // GET
        function GetData(){
            fetch("http://localhost:3000/users",{
                method:'get'
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error =>console.log(error))
        }
        
        // POST
        function PostData(){
            fetch("http://localhost:3000/users",{
                method: "post",
                headers: {
                    "Content-Type": "application/json" 
                },
                body: JSON.stringify({
                    "id": 6,
                    "first_name": "Kana",
                    "last_name": "dangerous",
                    "email": "kana123@yahoo.com"
                })
            }).then(response => response.json())
            .then(data => console.log(data))    
            .catch(error =>console.log(error))
        }
        
        // PUT
        function UpdateData(){
            fetch("http://localhost:3000/users/6",{
                method: "put",
                headers: {
                    "Content-Type": "application/json" 
                },
                body: JSON.stringify({
                    "id": 6,
                    "first_name": "Roronoa",
                    "last_name": "Zoro",
                    "email": "Zoro123@yahoo.com"
                })
            }).then(response => response.json())
            .then(data => console.log(data))    
            .catch(error =>console.log(error))
        }
        
        // DELETE
        function DeleteData(){
            fetch("http://localhost:3000/users/6",{
                method: "delete"
            })
            .then(response => response.json())
            .then(data => console.log(data))    
            .catch(error =>console.log(error))
        }
   // json-server user.json ใช้เรียก server json
   </script> -->

   <script>
        // GET
        async function GetData(){
            try{
                const response = await fetch("http://localhost:3000/users",{
                    method:'get'
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }
        
        // POST
        async function PostData(){
            try{
                const response = await fetch("http://localhost:3000/users",{
                    method: "post",
                    headers: {
                        "Content-Type": "application/json" 
                    },
                    body: JSON.stringify({
                        "id": 6,
                        "first_name": "Kana",
                        "last_name": "dangerous",
                        "email": "kana123@yahoo.com"
                    })
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }
        
        // PUT
        async function UpdateData(){
            try{
                const response = await fetch("http://localhost:3000/users/6",{
                    method: "put",
                    headers: {
                        "Content-Type": "application/json" 
                    },
                    body: JSON.stringify({
                    "id": 6,
                    "first_name": "Roronoa",
                    "last_name": "Zoro",
                    "email": "Zoro123@yahoo.com"
                })
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }

        // DELETE
        async function DeleteData(){
            try{
                const response = await fetch("http://localhost:3000/users/6",{
                    method: "delete"
                })
                const data = await response.json()
                console.log(data)
            }catch(error) {
                console.log(error)
            }
        }
   </script>
</body>
</html>